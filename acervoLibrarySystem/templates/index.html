<!DOCTYPE html>
<html lang="pt-BR">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sistema de Biblioteca</title>
    <link rel="stylesheet" href="/static/style.css?v=38">
    <link rel="stylesheet" href="/styles/style.css">
    <link rel="stylesheet" href="/styles/layout-fix.css">
</head>

<body>
    <div class="bg-circle"></div>
    <div class="bg-circle"></div>
    <div class="bg-circle"></div>
    <div class="container">
        <header class="app-header">
            <div class="app-header-text">
                <h1>Sistema de Biblioteca</h1>
            </div>
        </header>
        <div class="tabs">
            <button class="tab-link active" data-tab="add-book">Adicionar Livro</button>
            <button class="tab-link" data-tab="manage-students">Gerenciar Alunos</button>
            <button class="tab-link" data-tab="available-books">Livros Disponíveis</button>
            <button class="tab-link" data-tab="borrowed-books">Livros Emprestados</button>
            <button class="tab-link" data-tab="history">Histórico</button>
        </div>

        <div id="add-book" class="tab-content active">
            <div class="books-tab-wrapper">
                <div class="add-book-grid">
                    <!-- Coluna Esquerda: Botões de Ação -->
                    <div class="form-card action-card">
                        <h2 class="action-title">📚 Gerenciar Livros</h2>
                        <p class="action-description">Use os botões abaixo para adicionar novos livros ou editar livros
                            existentes no sistema.</p>

                        <!-- Botões de Ação -->
                        <div class="action-buttons-wrapper">
                            <button id="open-add-book-modal" type="button" class="add-book-modal-btn">
                                📚 Adicionar Novo Livro
                            </button>
                            <button id="open-edit-book-modal" type="button" class="edit-book-modal-btn">
                                ✏️ Editar Livro
                            </button>
                        </div>
                    </div>

                    <!-- Coluna Direita: Estatísticas -->
                    <div class="form-card stats-card">
                        <h2 class="stats-title">📊 Estatísticas do Sistema</h2>

                        <!-- Cards de estatísticas -->
                        <div class="stats-grid">
                            <div class="stat-card stat-card-total">
                                <div class="stat-label">📚 Total de Livros</div>
                                <div class="stat-value" id="total-books-count">0</div>
                            </div>
                            <div class="stat-card stat-card-available">
                                <div class="stat-label">✓ Disponíveis</div>
                                <div class="stat-value" id="available-books-count">0</div>
                            </div>
                            <div class="stat-card stat-card-borrowed">
                                <div class="stat-label">⏰ Emprestados</div>
                                <div class="stat-value" id="borrowed-books-count">0</div>
                            </div>
                            <div class="stat-card stat-card-students">
                                <div class="stat-label">👥 Alunos</div>
                                <div class="stat-value" id="total-students-count">0</div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Botão de Logout (fixo no canto inferior direito) -->
                <a href="/logout" class="btn-logout-bottom" title="Sair do sistema">
                    🚪 Sair
                </a>
            </div>
        </div>

        <!-- Nova aba: Gerenciar Alunos -->
        <div id="manage-students" class="tab-content">
            <div class="books-tab-wrapper">
                <div class="section-header">
                    <div class="section-title">
                        <h2>Gerenciar Alunos: <span id="students-count-badge" class="count-badge-inline"
                                title="Total de alunos cadastrados">0</span></h2>
                    </div>
                    <div class="controls-right">
                        <button id="open-add-student-modal-btn" class="add-student-btn">➕ Novo Aluno</button>
                        <input type="text" id="search-students" class="section-search" placeholder="Buscar aluno...">
                    </div>
                </div>

                <!-- Filtros -->
                <div class="students-filters"
                    style="padding: 1rem; background: #f8fafc; border-bottom: 1px solid #e2e8f0;">
                    <select id="filter-turma" style="padding: 0.5rem; border: 1px solid #e2e8f0; border-radius: 6px;">
                        <option value="">Todas as Turmas</option>
                        <option value="Turma 1">📚 Turma 1</option>
                        <option value="Turma 2">📚 Turma 2</option>
                        <option value="Turma 3">📚 Turma 3</option>
                    </select>
                </div>

                <div class="book-grid-header">
                    <span>Nome</span>
                    <span>Turma</span>
                    <span>Data de Cadastro</span>
                    <span>Ações</span>
                </div>
                <div id="students-grid" class="book-grid">
                    <div class="loader">Carregando alunos...</div>
                </div>
            </div>
        </div>

        <div id="available-books" class="tab-content">
            <div class="books-tab-wrapper">
                <div class="section-header">
                    <div class="section-title">
                        <h2>Livros Disponíveis: <span id="available-count-badge" class="count-badge-inline"
                                title="Número de livros disponíveis">0</span></h2>
                    </div>
                    <div class="controls-right">
                        <input type="text" id="search-books" class="section-search" placeholder="Pesquisar livros...">
                    </div>
                </div>
                <div class="book-grid-header">
                    <span>Titulo</span>
                    <span>Autor</span>
                    <span>Categoria</span>
                    <span>ISBN</span>
                    <span>Status</span>
                    <span>Ações</span>
                </div>
                <div id="book-grid" class="book-grid"></div>
            </div>
        </div>

        <div id="borrowed-books" class="tab-content">
            <div class="books-tab-wrapper">
                <div class="section-header">
                    <div class="section-title">
                        <h2>Livros Emprestados: <span id="borrowed-count-badge" class="count-badge-inline"
                                title="Número de livros emprestados">0</span></h2>
                    </div>
                    <div class="controls-right">
                        <input type="text" id="search-borrowed" class="section-search"
                            placeholder="Pesquisar livros emprestados...">
                    </div>
                </div>
                <div class="book-grid-header">
                    <span>Titulo</span>
                    <span>Autor</span>
                    <span>Categoria</span>
                    <span>ISBN</span>
                    <span>Informações de Emprestimo</span>
                </div>
                <div id="borrowed-grid" class="book-grid"></div>
            </div>
        </div>

        <div id="history" class="tab-content">
            <div class="books-tab-wrapper">
                <!-- Layout de 2 colunas: Filtros à esquerda, Lista à direita -->
                <div class="history-main-grid">
                    <!-- Coluna de Filtros e Controles -->
                    <aside class="history-sidebar">
                        <!-- Botão para abrir Estatísticas -->
                        <button id="open-stats-modal" class="btn-open-stats" title="Ver estatísticas do sistema">
                            📊 Ver Estatísticas
                        </button>

                        <!-- Card de Filtros Compacto -->
                        <div class="history-filters-card compact-filters">
                            <button class="filter-toggle" id="filter-toggle" aria-expanded="false" type="button">
                                <span class="filter-toggle-content">
                                    <span class="filter-icon">🔍</span>
                                    <span class="filter-title">Filtros</span>
                                    <span class="filter-badge" id="active-filters-count"></span>
                                </span>
                                <span class="filter-arrow">▼</span>
                            </button>

                            <div class="filters-content" id="filters-content">
                                <!-- Pesquisa rÃ¡pida -->
                                <div class="filter-group compact search-filter">
                                    <label for="search-history">Pesquisar</label>
                                    <input type="text" id="search-history" placeholder="Titulo, autor ou ISBN..."
                                        aria-label="Pesquisar histórico">
                                </div>

                                <!-- Grade de filtros compacta -->
                                <div class="filters-grid">
                                    <div class="filter-group compact">
                                        <label for="filter-type">Tipo</label>
                                        <select id="filter-type" aria-label="Filtrar por tipo">
                                            <option value="all">Todas</option>
                                            <option value="added">📚 Adicionados</option>
                                            <option value="borrowed">📖 Emprestados</option>
                                            <option value="returned">✅ Devolvidos</option>
                                        </select>
                                    </div>

                                    <div class="filter-group compact">
                                        <label for="filter-category">Categoria</label>
                                        <select id="filter-category" aria-label="Filtrar por categoria">
                                            <option value="all">Todas</option>
                                        </select>
                                    </div>

                                    <div class="filter-group compact">
                                        <label for="sort-by">Ordenar</label>
                                        <select id="sort-by" aria-label="Ordenar por">
                                            <option value="newest">Recentes</option>
                                            <option value="oldest">Antigos</option>
                                            <option value="title">A-Z</option>
                                        </select>
                                    </div>
                                </div>

                                <!-- Filtro de período -->
                                <div class="filter-group compact period-filter">
                                    <div class="date-range-compact">
                                        <input type="date" id="from-date" aria-label="Data início">
                                        <span>→</span>
                                        <input type="date" id="to-date" aria-label="Data fim">
                                    </div>
                                </div>

                                <button id="clear-filters" class="btn-clear-filters compact" type="button">
                                    <span>🔄</span> Limpar Filtros
                                </button>
                            </div>
                        </div>

                        <!-- Card de ExportaÃ§Ã£o -->
                        <div class="history-export-card">
                            <h3
                                style="margin: 0 0 0.8rem 0; font-size: 0.95rem; color: #1a365d; display: flex; align-items: center; gap: 0.5rem;">
                                <span>💾</span> Exportar
                            </h3>

                            <div class="filter-group compact">
                                <label for="export-scope">Escopo</label>
                                <select id="export-scope" title="Escopo da exportação">
                                    <option value="filtered">Filtrados</option>
                                    <option value="page">Página atual</option>
                                    <option value="all">Tudo</option>
                                </select>
                            </div>

                            <div class="export-buttons">
                                <button id="export-to-docs" class="btn-export btn-export-docs"
                                    title="Exportar para docs">
                                    Exportar CSV
                                </button>
                            </div>
                        </div>
                    </aside>

                    <!-- Coluna Principal: Lista de HistÃ³rico -->
                    <main class="history-main-content">
                        <div class="history-header">
                            <div class="history-title-section">
                                <h2 style="margin: 0; font-size: 1.2rem; color: #1a365d;">📋 Registros</h2>
                                <div class="section-title" style="margin-left: 1rem;">
                                    Total: <span id="summary-count" class="count-badge">0</span>
                                </div>
                            </div>
                            <button id="load-more" class="btn-load-more" style="display:none;">Carregar mais</button>
                        </div>

                        <div id="history-list" class="history-list-modern" aria-live="polite"></div>
                    </main>
                </div>

                <!-- Modal de Estatísticas -->
                <div id="stats-modal" class="modal" aria-hidden="true">
                    <div class="modal-content stats-modal-content" role="dialog" aria-modal="true"
                        aria-labelledby="stats-modal-title">
                        <header class="modal-header stats-modal-header">
                            <h2 id="stats-modal-title">
                                <span class="stats-title-icon">📊</span>
                                <span class="stats-title-text">Estatísticas do Sistema</span>
                            </h2>
                            <button class="modal-close stats-modal-close" id="stats-modal-close"
                                aria-label="Fechar">×</button>
                        </header>
                        <div class="modal-body stats-modal-body">
                            <!-- Grid de Cards de Estatísticas -->
                            <div class="stats-modal-grid">
                                <div class="stat-card-modal stat-card-added">
                                    <div class="stat-card-icon-wrapper">
                                        <div class="stat-icon-modal">📚</div>
                                    </div>
                                    <div class="stat-card-content">
                                        <div class="stat-label-modal">Livros Adicionados</div>
                                        <div class="stat-value-modal" id="stat-added">0</div>
                                        <div class="stat-description">Total de livros cadastrados</div>
                                    </div>
                                </div>

                                <div class="stat-card-modal stat-card-borrowed">
                                    <div class="stat-card-icon-wrapper">
                                        <div class="stat-icon-modal">📖</div>
                                    </div>
                                    <div class="stat-card-content">
                                        <div class="stat-label-modal">Emprestados</div>
                                        <div class="stat-value-modal" id="stat-borrowed">0</div>
                                        <div class="stat-description">Livros em empréstimo</div>
                                    </div>
                                </div>

                                <div class="stat-card-modal stat-card-returned">
                                    <div class="stat-card-icon-wrapper">
                                        <div class="stat-icon-modal">✅</div>
                                    </div>
                                    <div class="stat-card-content">
                                        <div class="stat-label-modal">Devolvidos</div>
                                        <div class="stat-value-modal" id="stat-returned">0</div>
                                        <div class="stat-description">Total de devoluções</div>
                                    </div>
                                </div>
                            </div>
                            <div class="stats-info-section">
                                <h3
                                    style="margin: 0 0 1.25rem 0; font-size: 1.1rem; color: #1a202c; display: flex; align-items: center; gap: 0.5rem; font-weight: 700;">
                                    <span style="font-size: 1.3rem;">📈</span>
                                    <span>Visão Geral</span>
                                </h3>
                                <div class="stats-summary-grid">
                                    <div class="summary-item">
                                        <div class="summary-icon">📊</div>
                                        <div class="summary-content">
                                            <span class="summary-label">Taxa de Empréstimo</span>
                                            <span class="summary-value" id="loan-rate">0%</span>
                                        </div>
                                    </div>
                                    <div class="summary-item">
                                        <div class="summary-icon">🔄</div>
                                        <div class="summary-content">
                                            <span class="summary-label">Taxa de Devolução</span>
                                            <span class="summary-value" id="return-rate">0%</span>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <!-- Rodapé do Modal -->
                            <div class="stats-modal-footer">
                                <p
                                    style="margin: 0; text-align: center; color: #64748b; font-size: 0.875rem; display: flex; align-items: center; justify-content: center; gap: 0.5rem;">
                                    <span style="font-size: 1.1rem;">💡</span>
                                    <span style="font-weight: 500;">Dados atualizados em tempo real</span>
                                </p>
                            </div>
                        </div>
                    </div>
                </div>

            </div>
        </div>

        <!-- Modal de Adicionar Livro -->
        <div id="add-book-modal" class="modal" aria-hidden="true">
            <div class="modal-content add-book-modal-content" role="dialog" aria-modal="true"
                aria-labelledby="add-book-modal-title">
                <header class="modal-header">
                    <h2 id="add-book-modal-title" style="display: flex; align-items: center; gap: 0.5rem; margin: 0;">
                        📚 Adicionar Novo Livro
                    </h2>
                    <button class="modal-close" id="add-book-modal-close" aria-label="Fechar">×</button>
                </header>
                <div class="modal-body">
                    <form id="modal-add-book-form">
                        <div class="form-row">
                            <div class="form-group">
                                <label for="modal-add-title" class="form-label">
                                    <span class="label-icon">📖</span>
                                    Titulo do Livro
                                </label>
                                <input type="text" id="modal-add-title" name="title" required
                                    placeholder="Digite o titulo completo" class="form-input">
                            </div>
                        </div>

                        <div class="form-row">
                            <div class="form-group">
                                <label for="modal-add-author" class="form-label">
                                    <span class="label-icon">✏️</span>
                                    Autor
                                </label>
                                <input type="text" id="modal-add-author" name="author" required
                                    placeholder="Nome do autor" class="form-input">
                            </div>
                        </div>

                        <div class="form-row">
                            <div class="form-group">
                                <label for="modal-add-category" class="form-label">
                                    <span class="label-icon">🏷️</span>
                                    Categoria
                                </label>
                                <input type="text" id="modal-add-category" name="category"
                                    placeholder="Ex: Ficção, Romance, etc." class="form-input">
                            </div>
                        </div>

                        <div class="form-row">
                            <div class="form-group">
                                <label for="modal-add-isbn" class="form-label">
                                    <span class="label-icon">🔢</span>
                                    ISBN
                                </label>
                                <input type="text" id="modal-add-isbn" name="isbn" required
                                    placeholder="Código ISBN (10 ou 13 dígitos)" class="form-input"
                                    pattern="[0-9X-]{10,17}">
                                <small class="form-hint">
                                    Formato: 978-85-123-4567-8 ou 85-123-4567-X
                                </small>
                            </div>
                        </div>

                        <div class="form-actions">
                            <button type="button" id="cancel-add-book" class="btn btn-secondary">
                                ❌ Cancelar
                            </button>
                            <button type="submit" class="btn btn-primary">
                                ✅ Adicionar Livro
                            </button>
                        </div>
                    </form>
                </div>
            </div>
        </div>

        <!-- Modal para detalhes do livro -->
        <div id="book-details-modal" class="modal">
            <div class="modal-content">
                <span id="close-details-modal" class="close-btn">×</span>
                <h2>Detalhes do Livro</h2>
                <p id="details-title"></p>
                <p id="details-author"></p>
                <p id="details-category"></p>
                <p id="details-isbn"></p>
                <p id="details-status"></p>
            </div>
        </div>

        <!-- Modal para devoluÃ§Ã£o (existente, para multas) -->
        <div id="return-modal" class="modal">
            <div class="modal-content">
                <span id="close-return-modal" class="close-btn">×</span>
                <h2>Devolução Realizada</h2>
                <p id="modal-book-title"></p>
                <p id="modal-return-date"></p>
                <p id="modal-fine"></p>
            </div>
        </div>

        <!-- Modal para emprÃ©stimo -->
        <div id="borrow-modal" class="modal" aria-hidden="true">
            <div class="modal-content">
                <header class="modal-header">
                    <h2>Emprestar Livro</h2>
                    <button id="close-borrow-modal" class="close-btn" aria-label="Fechar">×</button>
                </header>
                <div class="modal-body">
                    <p id="borrow-title" class="muted"></p>
                    <p id="borrow-author" class="muted"></p>
                    <p id="borrow-isbn" class="muted"></p>
                    <div class="form-group">
                        <label for="borrow-student-input">Buscar e Selecionar Aluno</label>
                        <div class="autocomplete-wrapper">
                            <input type="text" id="borrow-student-input" autocomplete="off"
                                placeholder="Digite o nome do aluno..." required>
                            <input type="hidden" id="borrow-student-value">
                            <div id="borrow-student-list" class="autocomplete-list" style="display:none;"></div>
                        </div>
                        <p class="muted" style="margin-top:0.5rem;font-size:0.9rem;">Digite para buscar. Apenas alunos
                            cadastrados podem emprestar livros.</p>
                    </div>
                </div>
                <footer class="modal-footer">
                    <button id="cancel-borrow-btn" class="btn secondary">Cancelar</button>
                    <button id="confirm-borrow-btn" class="btn primary" data-action="confirm-borrow">Emprestar</button>
                </footer>
            </div>
        </div>

        <!-- Modal para confirmar devoluÃ§Ã£o -->
        <div id="return-confirm-modal" class="modal" aria-hidden="true">
            <div class="modal-content">
                <header class="modal-header">
                    <h2>Confirmar Devolução</h2>
                    <button id="close-return-confirm-modal" class="close-btn" aria-label="Fechar">×</button>
                </header>
                <div class="modal-body">
                    <p id="return-title" class="muted"></p>
                    <p id="return-author" class="muted"></p>
                    <p id="return-isbn" class="muted"></p>
                    <p id="return-student-name" class="muted"></p>
                    <p id="return-borrow-date" class="muted"></p>
                    <p id="return-expected-date" class="muted"></p>
                    <p id="return-fine" class="muted"></p>
                </div>
                <footer class="modal-footer">
                    <button id="cancel-return-btn" class="btn secondary">Cancelar</button>
                    <button id="confirm-return-btn" class="btn primary">Confirmar Devolução</button>
                </footer>
            </div>
        </div>

        <div id="notification-container"></div>
    </div>

    <!-- Modal para ediÃ§Ã£o de livro -->
    <div id="edit-book-modal" class="modal" aria-hidden="true">
        <div class="modal-content" role="dialog" aria-modal="true" aria-labelledby="edit-book-modal-title"
            style="max-width: 600px; width: 90%;">
            <header class="modal-header"
                style="background: linear-gradient(135deg, #4299e1, #3182ce); color: white; padding: 1.2rem 1.5rem; border-radius: 12px 12px 0 0; display: flex; justify-content: space-between; align-items: center; margin: -1.5rem -1.5rem 0 -1.5rem;">
                <h2 id="edit-book-modal-title"
                    style="margin: 0; font-size: 1.3rem; font-weight: 700; display: flex; align-items: center; gap: 0.5rem;">
                    <span style="font-size: 1.5rem;">✏️</span>
                    <span>Editar Livro</span>
                </h2>
                <button class="modal-close" id="edit-book-modal-close" aria-label="Fechar"
                    style="background: rgba(255, 255, 255, 0.2); color: white; border: none; width: 36px; height: 36px; border-radius: 50%; font-size: 1.5rem; cursor: pointer; transition: all 0.3s ease; display: flex; align-items: center; justify-content: center; line-height: 1;">×</button>
            </header>
            <div class="modal-body" style="padding: 1.5rem;">
                <!-- Buscar livro -->
                <div class="form-group" style="margin-bottom: 1rem;">
                    <label for="search-book-edit"
                        style="font-size: 0.9rem; font-weight: 600; margin-bottom: 0.5rem; display: block;">🔍 Buscar
                        Livro:</label>
                    <input type="text" id="search-book-edit" placeholder="Digite titulo, autor ou ISBN..."
                        style="width: 100%; padding: 0.7rem; border: 2px solid #e2e8f0; border-radius: 6px; font-size: 0.9rem;">
                    <p style="margin: 0.4rem 0 0 0; font-size: 0.8rem; color: #718096;">Digite para buscar o livro que
                        deseja editar</p>
                </div>

                <!-- Lista de resultados da busca -->
                <div id="search-results-edit"
                    style="max-height: 200px; overflow-y: auto; margin-bottom: 1rem; border: 1px solid #e2e8f0; border-radius: 6px; display: none;">
                </div>

                <!-- FormulÃ¡rio de ediÃ§Ã£o (inicialmente oculto) -->
                <div id="edit-form-container" style="display: none;">
                    <div style="padding: 1rem; background: #f7fafc; border-radius: 6px; margin-bottom: 1rem;">
                        <h3 style="margin: 0 0 0.5rem 0; font-size: 0.95rem; color: #2d3748;">Editando: <span
                                id="editing-book-title" style="color: #4299e1; font-weight: 700;"></span></h3>
                        <input type="hidden" id="edit-book-id">
                    </div>

                    <form id="edit-book-form">
                        <div class="form-group" style="margin-bottom: 0.8rem;">
                            <label for="edit-title"
                                style="font-size: 0.85rem; font-weight: 600; margin-bottom: 0.3rem; display: block;">Titulo:</label>
                            <input type="text" id="edit-title" required placeholder="Titulo do livro"
                                style="width: 100%; padding: 0.6rem; border: 1.5px solid #e2e8f0; border-radius: 6px; font-size: 0.9rem;">
                        </div>

                        <div class="form-group" style="margin-bottom: 0.8rem;">
                            <label for="edit-author"
                                style="font-size: 0.85rem; font-weight: 600; margin-bottom: 0.3rem; display: block;">Autor:</label>
                            <input type="text" id="edit-author" required placeholder="Nome do autor"
                                style="width: 100%; padding: 0.6rem; border: 1.5px solid #e2e8f0; border-radius: 6px; font-size: 0.9rem;">
                        </div>

                        <div class="form-group" style="margin-bottom: 0.8rem;">
                            <label for="edit-category"
                                style="font-size: 0.85rem; font-weight: 600; margin-bottom: 0.3rem; display: block;">Categoria:</label>
                            <input type="text" id="edit-category" placeholder="Categoria do livro"
                                style="width: 100%; padding: 0.6rem; border: 1.5px solid #e2e8f0; border-radius: 6px; font-size: 0.9rem;">
                        </div>

                        <div class="form-group" style="margin-bottom: 0.8rem;">
                            <label for="edit-isbn"
                                style="font-size: 0.85rem; font-weight: 600; margin-bottom: 0.3rem; display: block;">ISBN:</label>
                            <input type="text" id="edit-isbn" required placeholder="ISBN do livro"
                                style="width: 100%; padding: 0.6rem; border: 1.5px solid #e2e8f0; border-radius: 6px; font-size: 0.9rem;">
                        </div>

                        <div style="display: flex; gap: 0.8rem; margin-top: 1.2rem;">
                            <button type="button" id="cancel-edit-btn"
                                style="flex: 1; padding: 0.7rem; background: #e2e8f0; color: #4a5568; border: none; border-radius: 6px; font-weight: 600; cursor: pointer;">Cancelar</button>
                            <button type="submit"
                                style="flex: 1; padding: 0.7rem; background: linear-gradient(135deg, #48bb78, #38a169); color: white; border: none; border-radius: 6px; font-weight: 600; cursor: pointer;">💾
                                Salvar Alterações</button>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>

    <!-- Modal para exclusÃ£o de livro -->
    <div id="delete-modal" class="modal" aria-hidden="true">
        <div class="modal-content" style="max-width: 500px; width: 90%;">
            <header class="modal-header"
                style="background: linear-gradient(135deg, #f56565, #e53e3e); color: white; padding: 1.2rem 1.5rem; border-radius: 12px 12px 0 0; display: flex; justify-content: space-between; align-items: center; margin: -1.5rem -1.5rem 0 -1.5rem;">
                <h2
                    style="margin: 0; font-size: 1.3rem; font-weight: 700; display: flex; align-items: center; gap: 0.5rem;">
                    <span style="font-size: 1.5rem;">🗑️</span>
                    <span>Excluir Livro</span>
                </h2>
                <button id="close-delete-modal" class="close-btn" aria-label="Fechar"
                    style="background: rgba(255, 255, 255, 0.2); color: white; border: none; width: 36px; height: 36px; border-radius: 50%; font-size: 1.5rem; cursor: pointer; transition: all 0.3s ease; display: flex; align-items: center; justify-content: center; line-height: 1;">×</button>
            </header>
            <div class="modal-body" style="padding: 1.5rem;">
                <p id="delete-modal-text" style="margin: 0 0 0.8rem 0; font-size: 0.95rem; color: #2d3748;">Tem certeza
                    que deseja excluir este livro? Esta ação não pode ser desfeita.</p>
                <p id="delete-modal-book" class="muted"></p>
            </div>
            <footer class="modal-footer"
                style="padding: 1rem 1.5rem; background: #f7fafc; border-radius: 0 0 12px 12px; margin: 0 -1.5rem -1.5rem -1.5rem; display: flex; gap: 0.8rem; justify-content: flex-end;">
                <button id="cancel-delete-btn" class="btn secondary"
                    style="padding: 0.7rem 1.5rem; background: #e2e8f0; color: #4a5568; border: none; border-radius: 6px; font-weight: 600; cursor: pointer;">Cancelar</button>
                <button id="confirm-delete-btn" class="btn primary"
                    style="padding: 0.7rem 1.5rem; background: linear-gradient(135deg, #f56565, #e53e3e); color: white; border: none; border-radius: 6px; font-weight: 600; cursor: pointer;">Excluir</button>
            </footer>
        </div>
    </div>

    <!-- Modal para adicionar aluno -->
    <div id="add-student-modal" class="modal" aria-hidden="true">
        <div class="modal-content" role="dialog" aria-modal="true" aria-labelledby="add-student-modal-title"
            style="max-width: 550px; width: 90%;">
            <header class="modal-header"
                style="background: linear-gradient(135deg, #4299e1, #3182ce); color: white; padding: 1.2rem 1.5rem; border-radius: 12px 12px 0 0; display: flex; justify-content: space-between; align-items: center; margin: -1.5rem -1.5rem 0 -1.5rem;">
                <h2 id="add-student-modal-title"
                    style="margin: 0; font-size: 1.3rem; font-weight: 700; display: flex; align-items: center; gap: 0.5rem;">
                    <span style="font-size: 1.5rem;">•</span>
                    <span>Adicionar Aluno</span>
                </h2>
                <button id="close-add-student-modal" class="close-btn" aria-label="Fechar"
                    style="background: rgba(255, 255, 255, 0.2); color: white; border: none; width: 36px; height: 36px; border-radius: 50%; font-size: 1.5rem; cursor: pointer; transition: all 0.3s ease; display: flex; align-items: center; justify-content: center; line-height: 1;">×</button>
            </header>
            <div class="modal-body" style="padding: 1.5rem;">
                <form id="add-student-modal-form">
                    <div class="form-group" style="margin-bottom: 1rem;">
                        <label for="add-student-modal-name"
                            style="font-size: 0.9rem; font-weight: 600; margin-bottom: 0.5rem; display: block;">Nome
                            Completo:</label>
                        <input type="text" id="add-student-modal-name" required placeholder="Digite o nome completo"
                            style="width: 100%; padding: 0.7rem; border: 2px solid #e2e8f0; border-radius: 6px; font-size: 0.9rem;">
                    </div>
                    <div class="form-group" style="margin-bottom: 0.5rem;">
                        <label for="add-student-modal-turma"
                            style="font-size: 0.9rem; font-weight: 600; margin-bottom: 0.5rem; display: block;">Turma:</label>
                        <select id="add-student-modal-turma" required
                            style="width: 100%; padding: 0.7rem; border: 2px solid #e2e8f0; border-radius: 6px; font-size: 0.9rem; cursor: pointer; background: white;">
                            <option value="">Carregando turmas...</option>
                        </select>
                    </div>
                </form>
            </div>
            <footer class="modal-footer"
                style="background: #f7fafc; padding: 1rem 1.5rem; border-radius: 0 0 12px 12px; margin: 0 -1.5rem -1.5rem -1.5rem; display: flex; justify-content: flex-end; gap: 0.75rem;">
                <button id="cancel-add-student-btn" class="btn secondary"
                    style="padding: 0.65rem 1.25rem; font-size: 0.9rem; background: #e2e8f0; color: #2d3748; border: none; border-radius: 6px; cursor: pointer; font-weight: 600; transition: all 0.2s;">Cancelar</button>
                <button id="confirm-add-student-btn" class="btn primary"
                    style="padding: 0.65rem 1.25rem; font-size: 0.9rem; background: #4299e1; color: white; border: none; border-radius: 6px; cursor: pointer; font-weight: 600; transition: all 0.2s;">Adicionar
                    Aluno</button>
            </footer>
        </div>
    </div>

    <!-- Modal para editar aluno -->
    <div id="edit-student-modal" class="modal" aria-hidden="true">
        <div class="modal-content" role="dialog" aria-modal="true" aria-labelledby="edit-student-modal-title"
            style="max-width: 550px; width: 90%;">
            <header class="modal-header"
                style="background: linear-gradient(135deg, #4299e1, #3182ce); color: white; padding: 1.2rem 1.5rem; border-radius: 12px 12px 0 0; display: flex; justify-content: space-between; align-items: center; margin: -1.5rem -1.5rem 0 -1.5rem;">
                <h2 id="edit-student-modal-title"
                    style="margin: 0; font-size: 1.3rem; font-weight: 700; display: flex; align-items: center; gap: 0.5rem;">
                    <span style="font-size: 1.5rem;">✏️</span>
                    <span>Editar Aluno</span>
                </h2>
                <button id="close-edit-student-modal" class="close-btn" aria-label="Fechar"
                    style="background: rgba(255, 255, 255, 0.2); color: white; border: none; width: 36px; height: 36px; border-radius: 50%; font-size: 1.5rem; cursor: pointer; transition: all 0.3s ease; display: flex; align-items: center; justify-content: center; line-height: 1;">×</button>
            </header>
            <div class="modal-body" style="padding: 1.5rem;">
                <form id="edit-student-form">
                    <div class="form-group" style="margin-bottom: 1rem;">
                        <label for="edit-student-name"
                            style="font-size: 0.9rem; font-weight: 600; margin-bottom: 0.5rem; display: block;">Nome
                            Completo:</label>
                        <input type="text" id="edit-student-name" required placeholder="Digite o nome completo"
                            style="width: 100%; padding: 0.7rem; border: 2px solid #e2e8f0; border-radius: 6px; font-size: 0.9rem;">
                    </div>
                    <div class="form-group" style="margin-bottom: 0.5rem;">
                        <label for="edit-student-turma"
                            style="font-size: 0.9rem; font-weight: 600; margin-bottom: 0.5rem; display: block;">Turma:</label>
                        <select id="edit-student-turma" required
                            style="width: 100%; padding: 0.7rem; border: 2px solid #e2e8f0; border-radius: 6px; font-size: 0.9rem; cursor: pointer; background: white;">
                            <option value="">Carregando turmas...</option>
                        </select>
                    </div>
                    <input type="hidden" id="edit-student-id">
                </form>
            </div>
            <footer class="modal-footer"
                style="background: #f7fafc; padding: 1rem 1.5rem; border-radius: 0 0 12px 12px; margin: 0 -1.5rem -1.5rem -1.5rem; display: flex; justify-content: flex-end; gap: 0.75rem;">
                <button id="cancel-edit-student-btn" class="btn secondary"
                    style="padding: 0.65rem 1.25rem; font-size: 0.9rem; background: #e2e8f0; color: #2d3748; border: none; border-radius: 6px; cursor: pointer; font-weight: 600; transition: all 0.2s;">Cancelar</button>
                <button id="confirm-edit-student-btn" class="btn primary"
                    style="padding: 0.65rem 1.25rem; font-size: 0.9rem; background: #4299e1; color: white; border: none; border-radius: 6px; cursor: pointer; font-weight: 600; transition: all 0.2s;">Salvar
                    Alterações</button>
            </footer>
        </div>
    </div>

    <!-- Modal para excluir aluno -->
    <div id="delete-student-modal" class="modal" aria-hidden="true">
        <div class="modal-content" style="max-width: 500px; width: 90%;">
            <header class="modal-header"
                style="background: linear-gradient(135deg, #f56565, #e53e3e); color: white; padding: 1.2rem 1.5rem; border-radius: 12px 12px 0 0; display: flex; justify-content: space-between; align-items: center; margin: -1.5rem -1.5rem 0 -1.5rem;">
                <h2
                    style="margin: 0; font-size: 1.3rem; font-weight: 700; display: flex; align-items: center; gap: 0.5rem;">
                    <span style="font-size: 1.5rem;">🗑️</span>
                    <span>Excluir Aluno</span>
                </h2>
                <button id="close-delete-student-modal" class="close-btn" aria-label="Fechar"
                    style="background: rgba(255, 255, 255, 0.2); color: white; border: none; width: 36px; height: 36px; border-radius: 50%; font-size: 1.5rem; cursor: pointer; transition: all 0.3s ease; display: flex; align-items: center; justify-content: center; line-height: 1;">×</button>
            </header>
            <div class="modal-body" style="padding: 1.5rem;">
                <p id="delete-student-modal-text" style="margin: 0 0 0.8rem 0; font-size: 0.95rem; color: #2d3748;">Tem
                    certeza que deseja excluir este aluno? Esta ação não pode ser desfeita.</p>
                <p id="delete-student-modal-name" class="muted"
                    style="font-weight: 600; color: #e53e3e; margin-top: 1rem;"></p>
                <input type="hidden" id="delete-student-id">
            </div>
            <footer class="modal-footer"
                style="padding: 1rem 1.5rem; background: #f7fafc; border-radius: 0 0 12px 12px; margin: 0 -1.5rem -1.5rem -1.5rem; display: flex; gap: 0.8rem; justify-content: flex-end;">
                <button id="cancel-delete-student-btn" class="btn secondary"
                    style="padding: 0.7rem 1.5rem; background: #e2e8f0; color: #4a5568; border: none; border-radius: 6px; font-weight: 600; cursor: pointer;">Cancelar</button>
                <button id="confirm-delete-student-btn" class="btn primary"
                    style="padding: 0.7rem 1.5rem; background: linear-gradient(135deg, #f56565, #e53e3e); color: white; border: none; border-radius: 6px; font-weight: 600; cursor: pointer;">Excluir</button>
            </footer>
        </div>
    </div>

    <script src="/static/notify.js?v=10"></script>
    <script src="/static/script.js?v=37"></script>
    <script src="/static/add-book-modal.js?v=6"></script>
    <script src="/static/edit-book.js?v=11"></script>
    <script src="/static/history.js?v=19"></script>
    <script src="/static/modal-simple.js?v=4"></script>
</body>

</html>